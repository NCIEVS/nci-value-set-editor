<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:c="http://java.sun.com/jstl/core">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Value Sets</title>
</head>
<body>
  <ui:composition template="/pages/templates/baseTemplate.xhtml">
     <ui:define name="menuBar">
      <ui:include src="/pages/include/menuBar.xhtml">
        <ui:param name="activeTab" value="valueset" />
      </ui:include>
     </ui:define>
     <h:form id="valueSetFormId">
     <table border="0" width="100%">
      <tr>
       <td align="left"><font size="4"><b>#{msg.label_editvalueset}</b></font></td>
       <td align="right" valign="bottom">
        <h:outputLink value="javascript:newPopup('${facesContext.externalContext.requestContextPath}/pages/editComponentPopup.xhtml');"
            styleClass="mainMenuLink" rendered="#{not empty ValueSetBean.uri}">
        &#xA0;<h:graphicImage value="../images/addComponent.gif" alt="Add component" title="Add component to value set definition" style="border: none" />&#xA0;
      </h:outputLink>
      </td>
      </tr>
      </table>
      <hr />
     <table border="0" width="100%">
      <tr>
        <td align="right"><font size="3"><b><u>Metadata</u></b></font></td>
         <td></td>
      </tr>
      <tr>
        <td align="right"><h:outputLabel for="uri" value="#{msg.label_uri}:" /></td>
        <td><h:inputText id="uri" value="#{ValueSetBean.uri}" width="300"/></td>
      </tr>
      <tr>
        <td align="right"><h:outputLabel for="conceptDomain" value="#{msg.label_domain}:" /></td>
         <td>
          <h:selectOneMenu id="conceptDomain" value="#{ValueSetBean.selectedConceptDomain}">
            <c:forEach var="v" items="${ValueSetBean.conceptDomainList}">
               <f:selectItem itemLabel="#{v.value}" itemValue="#{v.key}" />
            </c:forEach>
          </h:selectOneMenu>
         </td>
      </tr>
      <tr>
        <td align="right"><h:outputLabel for="codingScheme" value="#{msg.label_default_cs}:" /></td>
        <td>
            <h:selectOneMenu id="codingScheme" value="#{ValueSetBean.selectedOntology}">
              <c:forEach var="v" items="${ValueSetBean.ontologyList}">
                 <f:selectItem itemLabel="#{v.value}" itemValue="#{v.key}" />
              </c:forEach>
            </h:selectOneMenu>
         </td>
      </tr>
      <tr>
        <td align="right"><h:outputLabel for="sources" value="#{msg.label_sources}:" /></td>
        <td><h:inputText id="sources" value="#{ValueSetBean.sources}" width="300"/></td>
      </tr>
      <tr><td colspan="2" height="5px"></td></tr>
      <tr>
         <td></td>
         <td>
            <table border="0" width="100%">
               <tr>
                  <td valign="middle" width="100px">
                     <h:commandButton
                        value="Save" action="#{ValueSetBean.saveMetadataAction}"
                        onclick="javascript:cursor_wait();"
                        image="#{requestContextPath}/images/saveMetadata.gif" alt="Save value set metadata" />
                  </td>
                  <td width="30px"></td>
                  <td valign="middle" align="left">
                     <h:outputText value="#{ValueSetBean.message}"
                        rendered="#{not empty ValueSetBean.message}"
                        styleClass="inputMessage" />
                  </td>
               </tr>
            </table>
         </td>
      </tr>
      <c:choose>
         <c:when test="${sessionScope.ValueSetBean.componentCount>0}">
            <tr>
               <td colspan="2"><hr /></td>
            </tr>
            <tr>
               <td align="right"><font size="3"><b><u>Component Sets</u></b></font></td>
               <td></td>
            </tr>
            <tr>
               <td colspan="2">
                  <table cellpadding="3" cellspacing="0"
                     border="0" width="100%">
                     <tr height="15px">
                        <th class="dataRowDark" scope="col" align="left">Label</th>
                        <th class="dataRowDark" scope="col" align="left">Description</th>
                        <th class="dataRowDark" scope="col" align="left">Action</th>
                     </tr>
                     <c:forEach var="item" begin="0" items="#{ValueSetBean.componentObjectList}"
                        varStatus="status">
                        <c:set var="class" value="dataRowDark" />
                        <c:if test="${status.index % 2 == 0}">
                           <c:set var="class" value="dataRowLight" />
                        </c:if>
                        <tr class="#{class}">
                           <td>#{item.label}</td>
                           <td>#{item.description}</td>
                           <td width="110px">
                              <h:commandLink 
                                value="Edit"
                                onclick="javascript:newPopup('${facesContext.externalContext.requestContextPath}/pages/editComponentPopup.xhtml?labelParam=${item.label}');"
                                action="#{ComponentBean.openPopupAction}" />
                              &#xA0;
                              <h:commandLink action="#{ValueSetBean.removeComponentAction}"
                                  value="Remove" />
                              &#xA0;
                           </td>
                        </tr>
                     </c:forEach>
                  </table>
               </td>
            </tr>
         </c:when>
      </c:choose>
     </table>
     </h:form>
  </ui:composition>
  <ui:debug />
</body>
</html>